Система ранжирования
====================

Зависимости
===========

-   C++14

-   UbjsonCpp - библиотека для работы протокола (repo:
    https://github.com/NightCodersss/UbjsonCpp)

-   cppunit - библиотека для unit-тестирования (используется в Ubjson)

Разработчику
============

Помимно информации, изложенной здесь, следует изучить документацию,
сгенерированную doxygen’ом (директории latex и html в корне проекта).

Структура {#subsec:generalStructure}
---------

Структура выглядит так:
$(Фронт-энд или другой сервис) \xrightarrow[Южный протокол] Ranking System \xrightarrow[Северный протокол] IndexServer$
Где $'\rightarrow'$ обозначет подключение от клиена к серверу.

Протокол
--------

В всязи с тем, что Ubjson парсится на лету, не все поля обязательны. В
силу гибкости протокола незначительное изменение или значительное
добавление не должно требовать больших трудов. Что такое южный и
северный легко понять отсюда [subsec:generalStructure].

### Южный

Необходимо передавать строчку query, которая хранит в себе запрос.

    \{
        query: "what is ...?"
    \}

Планируется добавить параментры, каким образом представлять информацию о
документе обратно.

Заглушка работает так: слушает некоторый порт, по приходу данных, до
переноса строки ($\backslash n$), приходящие данные пакует в ubjson и
отправляет системе ранжирования. По приходу данных от системы
ранжирования (то есть системы поиска)(в ubjson) заглушка “их отвечает” в
json (обычном).

### Северный

Такой же, как “южный”, но с параментром - какой индекс использовать (по
какому тексту).

### Реализация

Ясно, что нехорошо ждать каждого ответа. Глобально, есть два пути
решения этой пролемы: использование асинхронных операций ввода-вывода (с
callback’ами) и использование большого количества потоков. Существенных
различий нет (нам известных), за исключением, что код с большим
количеством callback’ов плохо читаем и некрасив.

Итак, реализация такова, что на каждое соедниение выделется отдельный
поток, в котором соедниение работает синхронно.

Программистам-пользвателям
==========================

См. структуру [subsec:generalStructure]

Человеку, который запускает
===========================

См. структуру [subsec:generalStructure]
